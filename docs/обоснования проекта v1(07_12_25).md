# Обоснование решения

## Обоснование выбора устройств
Лидары являются оптимальным выбором для 3D-моделирования благодаря высокой точности и плотности собираемых данных, превосходящей другие методы, такие как фотограмметрия. Технология работает независимо от освещения, позволяя проводить сканирование днём и ночью. Лидары обеспечивают отсутствие геометрических искажений, автоматизацию процессов и возможность интеграции с другими источниками данных. Эти преимущества делают лидары универсальным инструментом для создания точных и надёжных 3D-моделей.

Лидары могут быть механические (с мотором) и твердотельные (с зеркалом). Механические лидары имеют высокую точность, дальность и широкий угол обзора.

**Таблица 1 — Характеристики механического лидaра и лидара на основе зеркал**

| Модель                        | Тип                 | Длина волны лазера | Угол сканирования | Частота сканирования | Точность |
|------------------------------:|--------------------:|-------------------:|------------------:|---------------------:|---------:|
| RPLIDAR A1                    | Механический        | 785 нм             | 360°              | 10 Гц                | 1%       |
| LR-1B 2D LiDAR Sensor         | На основе зеркал    | 905 нм             | 270°              | 10–25 Гц             | 1 мм     |

В рамках проекта было решено использовать **RPLIDAR A1** в связи с его высокой 
надёжностью и хорошими характеристиками (см. таблицу выше), а также 
**Raspberry Pi 3 Model B+**, шаговый двигатель **Nema 23 HS 8603** 
и драйвер **MicrostepDriver**.

**Таблица 2 — Характеристики некоторых моделей лидаров [2]**

| Модель                 | Цена (руб) | Категория   | Дальность      | Частота   | Угол обзора | Точность | Частота выборки        |
|:-----------------------|-----------:|:------------|:---------------|:---------:|:------------|:--------:|:----------------------:|
| RPLIDAR A1             | 9 671      | Универсальный | 0.15–12 м    | 10 Гц     | 360°        | ±1%      | 8000 точек/сек        |
| SLAMTEC RPLIDAR C1     | 7 930      | Бюджетный     | 0.15–10 м    | 9 Гц      | 360°        | ±1%      | 3600 точек/сек        |
| T-MINI-Plus            | 9 081      | Универсальный | 0.12–8 м     | 5–10 Гц   | 360°        | ±2%      | 4200 точек/сек        |

Raspberry Pi — это одноплатный компьютер. Для проекта была выбрана модель **Raspberry Pi 3 Model B+**. К основным причинам выбора относятся достоинства данной модели:

- Поддержка Ethernet, Wi-Fi и Bluetooth.  
- Компактный размер (размер банковской карты), автономность и мобильность по сравнению со стационарным компьютером.  
- Оперативной памяти (1 ГБ) достаточно для непрерывной работы с приложениями проекта.  
- Относительно низкая стоимость (приблизительно 15 000 руб. за микрокомпьютер и 2 000 руб. за зарядное устройство).  
- Наличие 4 USB-портов (важно для одновременного подключения мыши, клавиатуры, лидара и т. п.).

**Таблица 3 — Сравнительный анализ моделей Raspberry Pi (с 2018 года)**

| Модель (версия)        | ОЗУ                     | USB      | Ethernet               | Wi-Fi | Bluetooth | Стоимость (руб)                        |
|:-----------------------|:------------------------|:---------|:-----------------------|:------:|:---------:|:---------------------------------------|
| 3B+                    | 1 ГБ                    | 4 порта  | Gigabit через USB2     | +     | +        | Около 14 000                           |
| 3A+                    | 512 МБ                  | 1 порт   | –                      | +     | +        | Около 4 000                            |
| 4B                     | 2, 4, 8 ГБ              | 4 порта  | Gigabit                | +     | +        | От 20 000 (в зависимости от ОЗУ)       |
| Compute Module 4       | 1, 2, 4, 8 ГБ           | 1 порт   | Gigabit                | +     | +        | Около 19 000                           |
| Pico                   | 264 КБ + 2 МБ Flash     | 1 порт   | –                      | –     | –        | До 3 000                               |
| Zero 2 W               | 512 МБ                  | 1 порт   | –                      | +     | +        | Около 15 000                           |

*Источник: составлено авторами на основе [3].*

---

## Обоснование конструкции

В рамках первой итерации работы [4] была реализована первая версия аппаратно-программного комплекса и проведена апробация инструмента на кафедре. Испытания показали принципиальную работоспособность предложенного решения, но выявили потребность в доработке физической части инструмента.

Первоначальная модель имела толщину стали **1 мм**, что приводило к чрезмерной подвижности конструкции и сильной вибрации при работе мотора. В новой модели предусмотрен корпус из более толстой стали — **3 мм**, а также усилены поворотные части для снижения вибрации и повышения жёсткости конструкции.

## Обоснование выбора технологий

### 1. Backend: FastAPI (Python)

**Выбор:** FastAPI (Python) на хостовом компьютере для REST API, управления съёмкой, загрузки/хранения облаков точек.

**Аргументы:**

- Высокая производительность (асинхронная обработка), лёгкость написания API.
- Отличная интеграция с Python-экосистемой (напр., библиотеки для работы с NumPy, pandas, научными вычислениями).
- Быстрая разработка и типизация (pydantic) — уменьшает количество ошибок и документация (OpenAPI) автоматически генерируется.
- Удобно интегрируется с Web-фронтендом (JSON API) и с Docker.

**Альтернативы и сравнение:**

- Flask — проще и распространён, но медленнее в асинхронных задачах и требует больше шаблонного кода для валидации/документации.
- Django — мощная экосистема, ORM и административная панель; избыточен, если нужен лёгкий REST-сервис для управления устройствами и потоковой записи данных.
- Node.js / Express — хорош при интенсивной I/O и большом количестве подключений; однако большая часть научной обработки и существующий код проекта на Python делает FastAPI предпочтительнее (нет необходимости переписывать обработку данных).

**Вывод**: FastAPI даёт лучшее сочетание производительности, удобства разработки и совместимости с научным/аналитическим стеком Python.

### 2. База данных: PostgreSQL

**Выбор**: PostgreSQL для хранения метаданных экспериментов, ссылок на файлы облаков точек и аналитики.

**Аргументы:**

- Надёжность, транзакционная целостность, зрелость.
- Поддержка геометрических типов (PostGIS) и расширяемость — полезно при хранении пространственных данных.
- Хорошая совместимость с Python (psycopg / asyncpg) и наличием инструментов бэкапа.
- Широко используется в продакшене и легко разворачивается в Docker.

**Альтернативы и сравнение:**

- MongoDB / NoSQL — удобен для гибкой структуры точечных данных, но сложнее поддерживать транзакционность и сложные запросы; если данные — большие бинарные облака, Mongo может хранить, но для метаданных и связей PostgreSQL предпочтительнее.
- SQLite — лёгкая, но не подходит для многопользовательского доступа и контейнерных продакшен-сценариев.
- TimescaleDB (на базе PostgreSQL) — хорош для временных рядов; можно рассмотреть при необходимости мониторинга метрик.

**Вывод:** PostgreSQL — универсальна, масштабируема и даёт возможности пространственной аналитики при необходимости.

### 3. Контейнеризация: Docker

**Выбор**: Docker для развёртывания backend (FastAPI), DB (Postgres) и вспомогательных сервисов.

**Аргументы:**

- Повторяемость окружения: один ```docker-compose```/образ запускает весь стек одинаково на любой машине.
- Упрощённое CI/CD и тестирование.
- Изоляция зависимостей (Python-библиотеки, системные пакеты).
- Быстрая установка и переносимость между разработчиками и сервером.

**Альтернативы и сравнение:**

- Развёртывание на «голой» ОС — может быть быстрее по I/O, но увеличивает вероятность проблем совместимости и усложняет развёртывание.
- Kubernetes — избыточен для локального/небольшого проекта; Docker Compose достаточен на этапе разработки и для небольшого продакшена.

**Вывод:** Docker обеспечивает воспроизводимость и простоту развёртывания, что критично для командного и полевого тестирования.

### 4.  Визуализация: JavaScript (WebGL / Three.js / Potree)

**Выбор:** Web-фронтенд на JavaScript с использованием WebGL (Three.js) или специализированных рендереров точечных облаков (Potree).

**Аргументы:**

- Клиентская визуализация позволяет интерактивно вращать, зумить и фильтровать облако точек в браузере.
- Three.js — гибкая библиотека для рендеринга 3D; Potree оптимизирован для больших облаков точек (out-of-core рендеринг).
- Лёгкое интегрирование с FastAPI через JSON/REST / WebSocket для потоковой передачи данных.

**Альтернативы и сравнение:**

- Десктопные решения (CloudCompare, PCL viewer) — мощны, но не подходят для веб-доступа и удалённого управления.
- Canvas 2D — слишком ограничен для интерактивной 3D-визуализации.
- WebAssembly / PCL в WASM — перспективно для heavy-compute в браузере, но сложнее в разработке и интеграции.

**Вывод:** WebGL + Three.js / Potree дают баланс интерактивности, производительности и простоты интеграции с веб-интерфейсом.